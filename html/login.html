<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë¡œê·¸ì¸ - ì˜¤ëŠ˜ì˜ í•œ ì¤„</title>
    <!-- Tailwind CSS CDN ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter ë¡œë“œ -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* ê¸°ë³¸ í°íŠ¸ ì„¤ì • ë° ë°°ê²½ìƒ‰ */
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0f2f5; /* ë¶€ë“œëŸ¬ìš´ íšŒìƒ‰ ë°°ê²½ */
      }

      /* ì‚¬ìš©ì ì •ì˜ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ (Tailwind ê¸°ë³¸ ìœ„ì— ì¶”ê°€) */
      .custom-modal {
        display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        position: fixed; /* í™”ë©´ì— ê³ ì • */
        z-index: 1000; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— í‘œì‹œ */
        left: 0;
        top: 0;
        width: 100%; /* ì „ì²´ ë„ˆë¹„ */
        height: 100%; /* ì „ì²´ ë†’ì´ */
        overflow: auto; /* ë‚´ìš©ì´ ë„˜ì¹  ê²½ìš° ìŠ¤í¬ë¡¤ í—ˆìš© */
        background-color: rgba(0, 0, 0, 0.4); /* ë°˜íˆ¬ëª… ê²€ì • ë°°ê²½ */
        /* display: flex; <-- ì´ ì¤„ì„ ì œê±°í•˜ì—¬ ì´ˆê¸°ì—ëŠ” ëª¨ë‹¬ì´ ìˆ¨ê²¨ì§€ë„ë¡ í•©ë‹ˆë‹¤. */
        justify-content: center;
        align-items: center;
      }

      .custom-modal-content {
        background-color: #fff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        width: 90%;
        max-width: 350px;
        text-align: center;
      }

      /* ì‚¬ìš©ì ì œê³µ CSS (memberInfo ê´€ë ¨) */
      .memberInfo {
        display: flex;
        flex-direction: row; /* ìˆ˜í‰ ì •ë ¬ */
        justify-content: center; /* ê°€ìš´ë° ì •ë ¬ */
        gap: 10px; /* ë²„íŠ¼ ê°„ ê°„ê²© */
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .memberInfo li a {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 80px;
        height: 80px;
        text-decoration: none;
        color: black;
        font-size: 0.875rem; /* text-smì— í•´ë‹¹ */
        font-weight: 500; /* medium */
      }
      .memberInfo li a img {
        display: block;
        width: 36px; /* ì´ë¯¸ì§€ í¬ê¸° */
        height: 36px;
        margin-bottom: 4px; /* ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ ì‚¬ì´ ê°„ê²© */
      }
    </style>
  </head>
  <body class="flex flex-col min-h-screen">
    <!-- ìƒë‹¨ íˆ´ë°” -->
    <nav class="bg-white shadow-md py-4 px-8 flex justify-between items-center">
      <div class="flex-shrink-0">
        <a
          href="/Summer_Project/html/index.html"
          class="text-2xl font-bold text-gray-800"
          >ì˜¤ëŠ˜ì˜ í•œ ì¤„</a
        >
      </div>
      <ul class="memberInfo">
        <li id="loginButton">
          <a href="/Summer_Project/html/login.html">
            <img
              src="https://img.cgv.co.kr/R2014/images/common/ico/loginPassword.png"
              alt="ë¡œê·¸ì¸"
              onerror="this.src='https://placehold.co/36x36/ccc/000?text=ë¡œê·¸ì¸';"
            />
            <span>ë¡œê·¸ì¸</span>
          </a>
        </li>
        <li id="signupButton">
          <a href="/Summer_Project/html/signup.html">
            <img
              src="https://img.cgv.co.kr/R2014/images/common/ico/loginJoin.png"
              alt="íšŒì›ê°€ì…"
              onerror="this.src='https://placehold.co/36x36/ccc/000?text=íšŒì›ê°€ì…';"
            />
            <span>íšŒì›ê°€ì…</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- ë¡œê·¸ì¸ ë°•ìŠ¤ -->
    <div class="flex-1 flex items-center justify-center p-6">
      <div
        class="bg-white p-10 rounded-xl shadow-xl max-w-md w-full text-center"
      >
        <h2 class="text-4xl font-bold text-gray-800 mb-4">Welcome Back ğŸ‘‹</h2>
        <p class="text-gray-600 mb-8">ê³„ì •ì— ë¡œê·¸ì¸í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”</p>

        <form id="loginForm" class="space-y-6">
          <input
            type="text"
            id="username"
            placeholder="ì•„ì´ë””"
            required
            class="block w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
          />
          <input
            type="password"
            id="password"
            placeholder="ë¹„ë°€ë²ˆí˜¸"
            required
            class="block w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
          />
          <button
            type="submit"
            class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-md"
          >
            ë¡œê·¸ì¸
          </button>
        </form>

        <p class="text-gray-600 mt-8">
          ì•„ì§ íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”?
          <a
            href="/Summer_Project/html/signup.html"
            class="text-blue-600 hover:underline font-semibold"
            >íšŒì›ê°€ì…</a
          >
        </p>
      </div>
    </div>

    <!-- ëª¨ë‹¬: ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œìš©ìœ¼ë¡œë§Œ ì‚¬ìš© -->
    <div id="modal" class="custom-modal">
      <div class="custom-modal-content">
        <p id="modal-message" class="text-gray-800 text-lg mb-6"></p>
        <button
          id="close-modal"
          class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200"
        >
          í™•ì¸
        </button>
      </div>
    </div>

    <script>
      // í•„ìš”í•œ DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
      const loginForm = document.getElementById("loginForm");
      const usernameInput = document.getElementById("username"); // ì´ì „ì— useridì˜€ì„ ìˆ˜ ìˆìœ¼ë‚˜, login.html formì— ë”°ë¼ ë³€ê²½
      const passwordInput = document.getElementById("password");
      const modal = document.getElementById("modal");
      const modalMessage = document.getElementById("modal-message");
      const closeModalButton = document.getElementById("close-modal");

      // ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜
      function showModal(message) {
        modalMessage.textContent = message;
        modal.style.display = "flex"; // flexë¡œ ì„¤ì •í•˜ì—¬ ì¤‘ì•™ ì •ë ¬
      }

      // ëª¨ë‹¬ ìˆ¨ê¸°ê¸° í•¨ìˆ˜
      function hideModal() {
        modal.style.display = "none";
      }

      // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      closeModalButton.addEventListener("click", hideModal);

      // ë¡œê·¸ì¸ í¼ ì œì¶œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault(); // í¼ ê¸°ë³¸ ì œì¶œ ë™ì‘ ë°©ì§€

        const inputUserid = usernameInput.value.trim(); // login.htmlì—ì„œ ì•„ì´ë”” ì…ë ¥ í•„ë“œê°€ username idë¥¼ ê°€ì§
        const inputPassword = passwordInput.value.trim();

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë“±ë¡ëœ ëª¨ë“  ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const users = JSON.parse(localStorage.getItem("users")) || [];

        // ì…ë ¥ëœ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¡œ ì‚¬ìš©ì ì°¾ê¸°
        const foundUser = users.find(
          (user) =>
            user.userid === inputUserid && user.password === inputPassword
        );

        if (foundUser) {
          // ë¡œê·¸ì¸ ì„±ê³µ: ì‚¬ìš©ì ì•„ì´ë”” ëŒ€ì‹  ì‚¬ìš©ì ì´ë¦„ì„ loggedInUserë¡œ localStorageì— ì €ì¥
          // signup.htmlì—ì„œ username í•„ë“œì— ì‚¬ìš©ì ì´ë¦„ì´ ì €ì¥ëœë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
          localStorage.setItem("loggedInUser", foundUser.username); // <--- ì´ ë¶€ë¶„ì„ useridì—ì„œ usernameìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
          showModal("ë¡œê·¸ì¸ ì„±ê³µ!");
          // ëª¨ë‹¬ì´ ë‹«íŒ í›„ ë©”ì¸ í˜ì´ì§€(test.html)ë¡œ ì´ë™í•˜ë„ë¡ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
          closeModalButton.removeEventListener("click", hideModal); // ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ ì œê±°
          closeModalButton.addEventListener("click", () => {
            hideModal();
            window.location.href = "/Summer_Project/html/index.html";
          });
        } else {
          // ë¡œê·¸ì¸ ì‹¤íŒ¨: ëª¨ë‹¬ë¡œ ë©”ì‹œì§€ í‘œì‹œ
          showModal("ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
      });
    </script>
  </body>
</html>
